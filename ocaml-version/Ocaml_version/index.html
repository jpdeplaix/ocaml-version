<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ocaml_version (ocaml-version.Ocaml_version)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">ocaml-version</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Ocaml_version</span></h1></header><p>Manipulate, parse and generate OCaml version strings.</p><p>These are of the form <code>major.minor.patch+extra</code>, where the <code>patch</code> and <code>extra</code> fields are optional.</p><h2>Core types and parsers and serializers</h2><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"><p>Type of an OCaml version string</p></div></div><div class="spec val" id="val-v"><a href="#val-v" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>v : ?&#8288;patch:int <span class="keyword">&#8209;&gt;</span> ?&#8288;extra:string <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code>v ?patch ?extra major minor</code> will construct an OCaml version string with the appropriate parameters. The <code>patch</code> and <code>extra</code> indicators are optional, but it is conventional to include a <code>patch</code> value of 0 for most recent OCaml releases.</p></div></div><div class="spec val" id="val-to_string"><a href="#val-to_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_string : ?&#8288;sep:char <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code>to_string ?sep t</code> will convert the version <code>t</code> into a human-readable representation. The <code>sep</code> will default to <code>+</code> which is the normal representation of extra version strings, but can be changed to another character by supplying <code>sep</code>. One such usecase is to generate Docker container tags from OCaml version strings, where only dashes and alphanumeric characters are allowed.</p></div></div><div class="spec val" id="val-of_string"><a href="#val-of_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_string : string <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-t">t</a>, [&gt; `Msg of string ]) Pervasives.result</code></div><div class="doc"><p><code>of_string t</code> will parse the version string in <code>t</code>. The return value is compatible with the Result combinators defined in the <code>rresult</code> library.</p></div></div><div class="spec val" id="val-of_string_exn"><a href="#val-of_string_exn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>of_string_exn : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code>of_string_exn t</code> behaves as <a href="index.html#val-of_string">of_string</a> but raises <code>Invalid_argument</code> if the string cannot be parsed.</p></div></div><div class="spec val" id="val-compare"><a href="#val-compare" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>compare : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p><code>compare a b</code> is the comparison function for two OCaml version strings. Returns <code>-1</code> if <code>a&lt;b</code>, <code>0</code> if they are equal and <code>1</code> if <code>a&gt;b</code>. Comparison is done using integer comparison for the major, minor and patch versions, and lexical comparison for any extra version strings present.</p></div></div><div class="spec val" id="val-pp"><a href="#val-pp" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>pp : Format.formatter <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p><code>pp fmt t</code> will output a human-readable version string of <code>t</code> to the <code>fmt</code> formatter.</p></div></div><h3>Architecture Support</h3><p>These definitions cover the CPU architectures that OCaml runs and is supported on.</p><div class="spec type" id="type-arch"><a href="#type-arch" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>arch</code><span class="keyword"> = </span><code>[ </code><table class="variant"><tr id="type-arch.X86_64" class="anchored"><td class="def constructor"><a href="#type-arch.X86_64" class="anchor"></a><code><span class="keyword">| </span></code><code>`X86_64</code></td></tr><tr id="type-arch.Aarch64" class="anchored"><td class="def constructor"><a href="#type-arch.Aarch64" class="anchor"></a><code><span class="keyword">| </span></code><code>`Aarch64</code></td></tr></table><code> ]</code><code></code></div><div class="doc"><p>Type of CPU architectures. TODO: This is currently an incomplete list, and lists just those used by the opam test systems. Contributions welcome to complete it.</p></div></div><div class="spec val" id="val-arches"><a href="#val-arches" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>arches : <a href="index.html#type-arch">arch</a> list</code></div><div class="doc"><p><code>arches</code> is an enumeration of all of the possible <a href="index.html#type-arch">arch</a> values.</p></div></div><div class="spec val" id="val-string_of_arch"><a href="#val-string_of_arch" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>string_of_arch : <a href="index.html#type-arch">arch</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p><code>string_of_arch arch</code> will convert <code>arch</code> into a human-readable CPU architecture string. The result will follow the <a href="https://golang.org/doc/install/source#environment">GOARCH</a> convention used by Golang.</p></div></div><div class="spec val" id="val-arch_of_string"><a href="#val-arch_of_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>arch_of_string : string <span class="keyword">&#8209;&gt;</span> (<a href="index.html#type-arch">arch</a>, [&gt; `Msg of string ]) Pervasives.result</code></div><div class="doc"><p><code>arch_of_string t</code> will parse the architecture string in <code>t</code>. The return value is compatible with the Result combinators defined in the <code>rresult</code> library. This function is liberal and will attempt to understand variants of the same architecture. For example, both <code>aarch64</code> and <code>arm64</code> are parsed into `Aarch64.</p></div></div><div class="spec val" id="val-arch_of_string_exn"><a href="#val-arch_of_string_exn" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>arch_of_string_exn : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-arch">arch</a></code></div><div class="doc"><p><code>arch_of_string_exn t</code> is the same as <a href="index.html#val-arch_of_string">arch_of_string</a>, except that it raises <code>Invalid_argument</code> in case of error.</p></div></div><h2>Accessors</h2><div class="spec val" id="val-major"><a href="#val-major" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>major : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p><code>major t</code> will return the major version number of an OCaml release. For example, <code>of_string &quot;4.03.0&quot; |&gt; major</code> will return <code>4</code>.</p></div></div><div class="spec val" id="val-minor"><a href="#val-minor" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>minor : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p><code>minor t</code> will return the minor version number of an OCaml release. For example, <code>of_string &quot;4.03.0&quot; |&gt; minor</code> will return <code>3</code>.</p></div></div><div class="spec val" id="val-patch"><a href="#val-patch" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>patch : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int option</code></div><div class="doc"><p><code>patch t</code> will return the patch version number of an OCaml release. For example, <code>of_string &quot;4.03.0&quot; |&gt; minor</code> will return <code>Some 0</code>.</p></div></div><div class="spec val" id="val-extra"><a href="#val-extra" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>extra : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string option</code></div><div class="doc"><p><code>extra t</code> will return the additional information string of an OCaml release. For example, <code>of_string &quot;4.03.0+flambda&quot; |&gt; extra</code> will return <code>Some &quot;flambda&quot;</code>.</p></div></div><div class="spec val" id="val-with_variant"><a href="#val-with_variant" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>with_variant : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string option <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code>with_variant t extra</code> will return a fresh value with the extra version information in the OCaml string to <code>extra</code>, and remove it if <code>None</code> is supplied.</p></div></div><h2>Constants</h2><div class="spec val" id="val-sys_version"><a href="#val-sys_version" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>sys_version : <a href="index.html#type-t">t</a></code></div><div class="doc"><p><code>sys_version</code> is the version of OCaml that this library is currently compiled with, which will be the same as <span class="xref-unresolved" title="unresolved reference to &quot;Sys.ocaml_version&quot;">Sys.ocaml_version</span>.</p></div></div><div class="spec module" id="module-Releases"><a href="#module-Releases" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Releases/index.html">Releases</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Values representing official releases of OCaml.</p></div></div><h2>Feature Selection</h2><div class="spec module" id="module-Since"><a href="#module-Since" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Since/index.html">Since</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Determine which release a feature or architecture first appeared in.</p></div></div><div class="spec module" id="module-Has"><a href="#module-Has" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Has/index.html">Has</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Test whether a release has a given feature.</p></div></div><div class="spec module" id="module-Opam"><a href="#module-Opam" class="anchor"></a><div class="def module"><code><span class="keyword">module </span><a href="Opam/index.html">Opam</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="doc"><p>Opam compiler switches. These are available from the public <a href="https://github.com/ocaml/opam-repository">opam-repository</a>.</p></div></div></body></html>